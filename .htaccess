# Habilitar mod_rewrite
RewriteEngine On

# Asegurarse que el directorio base es correcto
RewriteBase /portalcolaborador/

# Permitir ejecución de Python y CGI
Options +ExecCGI +FollowSymLinks
AddHandler cgi-script .py .cgi

# Configuración de Python
SetEnv PYTHONPATH /home/u396608776/domains/uno14.trading/public_html/portalcolaborador
SetEnv FLASK_APP frontend_service
SetEnv FLASK_ENV production

# Asegurar que index.py es ejecutable
<Files "index.py">
    Options +ExecCGI
    SetHandler cgi-script
    Require all granted
</Files>

# Permitir acceso a archivos estáticos
<FilesMatch "\.(css|js|jpg|jpeg|png|gif|ico)$">
    Require all granted
</FilesMatch>

# Redirigir todas las peticiones a index.py
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.py/$1 [QSA,L]

# Configuración de seguridad
<Files ~ "^\.">
    Order allow,deny
    Deny from all
</Files>

# Prevenir listado de directorios
Options -Indexes

# Configuración de CORS
Header set Access-Control-Allow-Origin "*"
Header set Access-Control-Allow-Methods "GET,POST,OPTIONS,DELETE,PUT"
Header set Access-Control-Allow-Headers "Content-Type, Authorization"

# Favicon
<Files "favicon.ico">
    ForceType image/x-icon
</Files> 